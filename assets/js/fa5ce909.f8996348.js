"use strict";(self.webpackChunknapi_www=self.webpackChunknapi_www||[]).push([[1619],{14410:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>g,frontMatter:()=>p,metadata:()=>s,toc:()=>l});var r=i(74848),o=i(28453);const p={slug:"gpio-pinmux-debug",title:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u0438 GPIO \u043f\u0438\u043d\u043e\u0432 \u0432 Linux",authors:"dmn",tags:["gpio","pinmux","debug","rockchip","pinctrl"],telegram_id:30},t=void 0,s={permalink:"/recipes/gpio-pinmux-debug",source:"@site/techblog/2025-12-01-gpio-pinmux-debug/index.md",title:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u0438 GPIO \u043f\u0438\u043d\u043e\u0432 \u0432 Linux",description:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u0438 GPIO",date:"2025-12-01T00:00:00.000Z",tags:[{inline:!0,label:"gpio",permalink:"/recipes/tags/gpio"},{inline:!0,label:"pinmux",permalink:"/recipes/tags/pinmux"},{inline:!0,label:"debug",permalink:"/recipes/tags/debug"},{inline:!0,label:"rockchip",permalink:"/recipes/tags/rockchip"},{inline:!0,label:"pinctrl",permalink:"/recipes/tags/pinctrl"}],readingTime:2.52,hasTruncateMarker:!1,authors:[{name:"dmn",title:"maintainer",url:"https://github.com/dmnovikov",imageURL:"https://avatars.githubusercontent.com/u/17533288?v=4",key:"dmn"}],frontMatter:{slug:"gpio-pinmux-debug",title:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u0438 GPIO \u043f\u0438\u043d\u043e\u0432 \u0432 Linux",authors:"dmn",tags:["gpio","pinmux","debug","rockchip","pinctrl"],telegram_id:30},unlisted:!1,prevItem:{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0440\u0442\u0430 \u0432 Linux",permalink:"/recipes/serial-port-configuration"},nextItem:{title:"Overlay \u0434\u043b\u044f RS485 \u043d\u0430 UART1 \u0441 GPIO \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f",permalink:"/recipes/rs485-uart1-overlay"}},c={authorsImageUrls:[void 0]},l=[{value:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u0438 GPIO",id:"\u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430-\u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u0438-gpio",level:2},{value:"\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430 \u043d\u0430 NAPI-C",id:"\u043f\u0440\u0438\u043c\u0435\u0440-\u0432\u044b\u0432\u043e\u0434\u0430-\u043d\u0430-napi-c",level:3},{value:"\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043d\u044f\u0442\u043e\u0433\u043e GPIO",id:"\u043f\u0440\u0438\u043c\u0435\u0440-\u0437\u0430\u043d\u044f\u0442\u043e\u0433\u043e-gpio",level:3},{value:"\u041f\u0440\u0438\u043c\u0435\u0440 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e GPIO",id:"\u043f\u0440\u0438\u043c\u0435\u0440-\u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e-gpio",level:3},{value:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 GPIO \u0432 DTS",id:"\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435-gpio-\u0432-dts",level:3},{value:"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0437\u0430\u0445\u0432\u0430\u0442\u0430 GPIO",id:"\u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430-\u0437\u0430\u0445\u0432\u0430\u0442\u0430-gpio",level:3},{value:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 UART1",id:"\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435-uart1",level:3}];function a(n){const e={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"\u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430-\u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u0438-gpio",children:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 \u0437\u0430\u043d\u044f\u0442\u043e\u0441\u0442\u0438 GPIO"}),"\n",(0,r.jsx)(e.p,{children:"\u0412 Linux \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0447\u0435\u043c \u0437\u0430\u043d\u044f\u0442\u044b \u0432\u0441\u0435 GPIO:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"cat /sys/kernel/debug/pinctrl/pinctrl-rockchip-pinctrl/pinmux-pins\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u043f\u0440\u0438\u043c\u0435\u0440-\u0432\u044b\u0432\u043e\u0434\u0430-\u043d\u0430-napi-c",children:"\u041f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0432\u043e\u0434\u0430 \u043d\u0430 NAPI-C"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"root@rockpi-s:~# cat /sys/kernel/debug/pinctrl/pinctrl-rockchip-pinctrl/pinmux-pins\nPinmux settings per pin\nFormat: pin (name): mux_owner gpio_owner hog?\npin 0 (gpio0-0): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 1 (gpio0-1): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 2 (gpio0-2): sdio-pwrseq gpio0:2 function sdio-pwrseq group wifi-enable-h\npin 3 (gpio0-3): ff480000.mmc (GPIO UNCLAIMED) function sdmmc group sdmmc-det\npin 4 (gpio0-4): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 5 (gpio0-5): leds gpio0:5 function leds group heartbeat-led\npin 6 (gpio0-6): leds gpio0:6 function leds group green-led\npin 7 (gpio0-7): stmmac-0:01 gpio0:7 function gmac group mac-rst\npin 8 (gpio0-8): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 9 (gpio0-9): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 10 (gpio0-10): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 11 (gpio0-11): ff050000.i2c (GPIO UNCLAIMED) function i2c1 group i2c1-xfer\npin 12 (gpio0-12): ff050000.i2c (GPIO UNCLAIMED) function i2c1 group i2c1-xfer\npin 13 (gpio0-13): ff180000.pwm (GPIO UNCLAIMED) function pwm0 group pwm0-pin-pull-down\npin 14 (gpio0-14): (MUX UNCLAIMED) (GPIO UNCLAIMED)\npin 15 (gpio0-15): (MUX UNCLAIMED) (GPIO UNCLAIMED)\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u043f\u0440\u0438\u043c\u0435\u0440-\u0437\u0430\u043d\u044f\u0442\u043e\u0433\u043e-gpio",children:"\u041f\u0440\u0438\u043c\u0435\u0440 \u0437\u0430\u043d\u044f\u0442\u043e\u0433\u043e GPIO"}),"\n",(0,r.jsxs)(e.p,{children:["\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, ",(0,r.jsx)(e.code,{children:"GPIO0-A5"}),' \u0437\u0430\u043d\u044f\u0442 \u0438 \u043c\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u043c \u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u043a\u0430\u043a DE \u0434\u043b\u044f UART \u0431\u0435\u0437 \u043b\u0438\u0448\u043d\u0438\u0445 "\u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440" \u043f\u043e \u0435\u0433\u043e \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u0438\u044e:']}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"root@rockpi-s:~/S4-GPIO2_A5# cat /sys/kernel/debug/pinctrl/pinctrl-rockchip-pinctrl/pinmux-pins | grep gpio0-5\npin 5 (gpio0-5): leds gpio0:5 function leds group heartbeat-led\nroot@rockpi-s:~/S4-GPIO2_A5#\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u043f\u0440\u0438\u043c\u0435\u0440-\u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e-gpio",children:"\u041f\u0440\u0438\u043c\u0435\u0440 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0433\u043e GPIO"}),"\n",(0,r.jsxs)(e.p,{children:["\u0410 \u0432\u043e\u0442 ",(0,r.jsx)(e.code,{children:"GPIO2-B4"})," \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"root@rockpi-s:~/S4-GPIO2_A5# cat /sys/kernel/debug/pinctrl/pinctrl-rockchip-pinctrl/pinmux-pins | grep gpio2-12\npin 76 (gpio2-12): (MUX UNCLAIMED) (GPIO UNCLAIMED)\n"})}),"\n",(0,r.jsx)(e.p,{children:'\u0418 \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0435\u0433\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e "\u0434\u0435\u0440\u0433\u0430\u0442\u044c":'}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"root@rockpi-s:~/S4-GPIO2_A5# gpioset gpiochip2 12=1\nroot@rockpi-s:~/S4-GPIO2_A5# gpioset gpiochip2 12=0\nroot@rockpi-s:~/S4-GPIO2_A5#\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435-gpio-\u0432-dts",children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 GPIO \u0432 DTS"}),"\n",(0,r.jsxs)(e.p,{children:['\u0410 \u0442\u0435\u043f\u0435\u0440\u044c "\u0437\u0430\u0445\u0432\u0430\u0442\u0438\u043c" \u043f\u0438\u043d ',(0,r.jsx)(e.code,{children:"GPIO2_A5"})," \u0434\u043b\u044f DE \u0432 UART1 \u0442\u0430\u043a\u0438\u043c DTS:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dts",children:' /dts-v1/;\n/plugin/;\n\n/ {\n  compatible = "rockchip,rk3308";\n\n  fragment@0 {\n    target = <&uart1>;\n    __overlay__ {\n      status = "okay";\n\n      pinctrl-names = "default";\n      pinctrl-0 = <&uart1_xfer>;\n\n      linux,rs485-enabled-at-boot-time;\n      rs485-rts-active-high;\n      rs485-rts-delay = <0 0>;\n      rts-gpios = <&gpio2 5 0>;\n    };\n  };\n};\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430-\u0437\u0430\u0445\u0432\u0430\u0442\u0430-gpio",children:"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0437\u0430\u0445\u0432\u0430\u0442\u0430 GPIO"}),"\n",(0,r.jsx)(e.p,{children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043a\u0430\u043a \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043f\u0438\u043d:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"root@rockpi-s:~/S4-GPIO2_A5# cat /sys/kernel/debug/pinctrl/pinctrl-rockchip-pinctrl/pinmux-pins | grep gpio2-5\npin 69 (gpio2-5): (MUX UNCLAIMED) gpio2:69\nroot@rockpi-s:~/S4-GPIO2_A5#\n"})}),"\n",(0,r.jsx)(e.p,{children:'\u0422\u0443\u0442 \u043d\u0435 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043f\u043e\u043d\u044f\u0442\u043d\u043e \u0437\u0430\u0445\u0432\u0430\u0442\u0438\u043b\u0441\u044f \u043e\u043d \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u043e\u043c RS485 \u0438\u043b\u0438 \u043d\u0435\u0442. \u041d\u043e \u0447\u0442\u043e \u0432\u0430\u0436\u043d\u043e, Linux \u043d\u0435 \u0434\u0430\u0441\u0442 \u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043c "\u043c\u0438\u0433\u0430\u0442\u044c", \u0435\u0441\u043b\u0438 \u043e\u043d \u0437\u0430\u043d\u044f\u0442 \u0434\u0440\u0430\u0439\u0432\u0435\u0440\u043e\u043c \u044f\u0434\u0440\u0430:'}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"root@rockpi-s:~/S4-GPIO2_A5# gpioset gpiochip2 5=0\ngpioset: error setting the GPIO line values: Device or resource busy\nroot@rockpi-s:~/S4-GPIO2_A5# gpioset gpiochip2 5=1\ngpioset: error setting the GPIO line values: Device or resource busy\nroot@rockpi-s:~/S4-GPIO2_A5#\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435-uart1",children:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 UART1"}),"\n",(0,r.jsx)(e.p,{children:"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0443\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f, \u0447\u0442\u043e \u043c\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 UART1:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"root@rockpi-s:~/S4-GPIO2_A5# mbpoll -m rtu -P none -b 115200 -a 125 -r 1 -c 4 -t4   /dev/ttyS1\nmbpoll 1.0-0 - FieldTalk(tm) Modbus(R) Master Simulator\nCopyright \xa9 2015-2019 Pascal JEAN, https://github.com/epsilonrt/mbpoll\nThis program comes with ABSOLUTELY NO WARRANTY.\nThis is free software, and you are welcome to redistribute it\nunder certain conditions; type 'mbpoll -w' for details.\n\nProtocol configuration: Modbus RTU\nSlave configuration...: address = [125]\n                        start reference = 1, count = 4\nCommunication.........: /dev/ttyS1,     115200-8N1\n                        t/o 1.00 s, poll rate 1000 ms\nData type.............: 16-bit register, output (holding) register table\n\n-- Polling slave 125... Ctrl-C to stop)\n[1]:   125\n[2]:   1\n[3]:   851\n[4]:   772\n\n"})})]})}function g(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>t,x:()=>s});var r=i(96540);const o={},p=r.createContext(o);function t(n){const e=r.useContext(p);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:t(n.components),r.createElement(p.Provider,{value:e},n.children)}}}]);