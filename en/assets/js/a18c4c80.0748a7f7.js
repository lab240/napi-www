"use strict";(self.webpackChunknapi_www=self.webpackChunknapi_www||[]).push([[5121],{81404:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>a});var r=i(74848),s=i(28453);const t={slug:"influxdb-series-repair",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0445 series \u0432 InfluxDB",authors:"dmn",tags:["influxdb","repair","debugging","series","tsi"],telegram_id:19},o=void 0,l={permalink:"/en/recipes/influxdb-series-repair",source:"@site/techblog/2025-09-17-influxdb-series-repair/index.md",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0445 series \u0432 InfluxDB",description:'\u041a\u0430\u043a "\u043f\u043e\u0447\u0438\u043d\u0438\u0442\u044c" \u0441\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435 series \u0432 InfluxDB',date:"2025-09-17T00:00:00.000Z",tags:[{inline:!0,label:"influxdb",permalink:"/en/recipes/tags/influxdb"},{inline:!0,label:"repair",permalink:"/en/recipes/tags/repair"},{inline:!0,label:"debugging",permalink:"/en/recipes/tags/debugging"},{inline:!0,label:"series",permalink:"/en/recipes/tags/series"},{inline:!0,label:"tsi",permalink:"/en/recipes/tags/tsi"}],readingTime:1.58,hasTruncateMarker:!1,authors:[{name:"dmn",title:"maintainer",url:"https://github.com/dmnovikov",imageURL:"https://avatars.githubusercontent.com/u/17533288?v=4",key:"dmn"}],frontMatter:{slug:"influxdb-series-repair",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0445 series \u0432 InfluxDB",authors:"dmn",tags:["influxdb","repair","debugging","series","tsi"],telegram_id:19},unlisted:!1,prevItem:{title:"\u041f\u0435\u0440\u0435\u043d\u043e\u0441 blue-led \u043d\u0430 GPIO2B4 \u0432 Armbian",permalink:"/en/recipes/blue-led-gpio2b4"},nextItem:{title:"\u041f\u0435\u0440\u0435\u043d\u043e\u0441 heartbeat \u0434\u0438\u043e\u0434\u0430 \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 GPIO \u0447\u0435\u0440\u0435\u0437 overlay",permalink:"/en/recipes/gpio-heartbeat-overlay"}},d={authorsImageUrls:[void 0]},a=[{value:"\u041a\u0430\u043a &quot;\u043f\u043e\u0447\u0438\u043d\u0438\u0442\u044c&quot; \u0441\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435 series \u0432 InfluxDB",id:"\u043a\u0430\u043a-\u043f\u043e\u0447\u0438\u043d\u0438\u0442\u044c-\u0441\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435-series-\u0432-influxdb",level:2},{value:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430",id:"\u043e\u0448\u0438\u0431\u043a\u0430-\u0437\u0430\u043f\u0443\u0441\u043a\u0430",level:3},{value:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c series",id:"\u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c-series",level:3},{value:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0445 series",id:"\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435-\u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0445-series",level:3},{value:"\u041f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0438\u043c series",id:"\u043f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0438\u043c-series",level:3},{value:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",id:"\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\u043a\u0430\u043a-\u043f\u043e\u0447\u0438\u043d\u0438\u0442\u044c-\u0441\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435-series-\u0432-influxdb",children:'\u041a\u0430\u043a "\u043f\u043e\u0447\u0438\u043d\u0438\u0442\u044c" \u0441\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0435 series \u0432 InfluxDB'}),"\n",(0,r.jsx)(n.p,{children:"\u041d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u043e \u043f\u0440\u0438 \u043e\u0442\u043b\u0430\u0434\u043a\u0435 \u0434\u0430\u0442\u0447\u0438\u043a\u043e\u0432 influxdb \u043f\u0435\u0440\u0435\u0441\u0442\u0430\u043b \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c\u0441\u044f \u0441 \u0442\u0430\u043a\u043e\u0439 \u043e\u0448\u0438\u0431\u043a\u043e\u0439."}),"\n",(0,r.jsx)(n.h3,{id:"\u043e\u0448\u0438\u0431\u043a\u0430-\u0437\u0430\u043f\u0443\u0441\u043a\u0430",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'root@napi-playfulokapi:~# /usr/lib/influxdb/scripts/influxd-systemd-start.sh\nCommand "print-config" is deprecated, use the influx-cli command server-config to display the configuration values from the running server\n2025-09-16T08:54:29.621708Z     info    Welcome to InfluxDB     {"log_id": "0z0RZky0000", "version": "v2.7.1", "commit": "407fa622e9", "build_date": "2023-04-28T13:24:42Z", "log_level": "info"}\n2025-09-16T08:54:29.677535Z     info    Resources opened        {"log_id": "0z0RZky0000", "service": "bolt", "path": "/root/.influxdbv2/influxd.bolt"}\n2025-09-16T08:54:29.680849Z     info    Resources opened        {"log_id": "0z0RZky0000", "service": "sqlite", "path": "/root/.influxdbv2/influxd.sqlite"}\n2025-09-16T08:54:29.754889Z     info    Checking InfluxDB metadata for prior version.   {"log_id": "0z0RZky0000", "bolt_path": "/root/.influxdbv2/influxd.bolt"}\n2025-09-16T08:54:29.756722Z     info    Using data dir  {"log_id": "0z0RZky0000", "service": "storage-engine", "service": "store", "path": "/root/.influxdbv2/engine/data"}\n2025-09-16T08:54:29.773043Z     info    Compaction settings     {"log_id": "0z0RZky0000", "service": "storage-engine", "service": "store", "max_concurrent_compactions": 2, "throughput_bytes_per_second": 50331648, "throughput_bytes_per_second_burst": 50331648}\n2025-09-16T08:54:29.774155Z     info    Open store (start)      {"log_id": "0z0RZky0000", "service": "storage-engine", "service": "store", "op_name": "tsdb_open", "op_event": "start"}\n2025-09-16T08:54:29.780689Z     error   Unable to open series file      {"log_id": "0z0RZky0000", "service": "storage-engine", "path": "/root/.influxdbv2/engine/data/50d1dfc5f00c762d/_series", "partition": 0, "error": "invalid series segment"}\n2025-09-16T08:54:29.781180Z     info    Open store (end)        {"log_id": "0z0RZky0000", "service": "storage-engine", "service": "store", "op_name": "tsdb_open", "op_event": "end", "op_elapsed": "7.046ms"}\n2025-09-16T08:54:29.781345Z     error   Failed to open engine   {"log_id": "0z0RZky0000", "error": "invalid series segment"}\nError: invalid series segment\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e \u0432 \u043b\u043e\u0433\u0435 - \u0443 \u043d\u0430\u0441 \u0441\u043b\u043e\u043c\u0430\u043b\u0441\u044f series. \u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0431\u0430\u0437\u044b \u043c\u043d\u0435 \u043d\u0435 \u043f\u043e\u043c\u043e\u0433\u043b\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0447\u0438\u0441\u0442\u0438\u043b \u0432\u0440\u0443\u0447\u043d\u0443\u044e."}),"\n",(0,r.jsx)(n.h3,{id:"\u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c-series",children:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c series"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'root@napi-playfulokapi:~# influxd inspect   verify-seriesfile\n2025-09-16T09:00:55.486187Z  error   Error opening segment   {"log_id": "0z0RwJBW000", "path": "/root/.influxdbv2/engine/data/50d1dfc5f00c762d/_series", "partition": "01", "segment": "0000", "error": "invalid series segment"}\n2025-09-16T09:00:55.497022Z  error   Error opening segment   {"log_id": "0z0RwJBW000", "path": "/root/.influxdbv2/engine/data/50d1dfc5f00c762d/_series", "partition": "00", "segment": "0000", "error": "invalid series segment"}\n2025-09-16T09:00:55.507980Z  error   Error opening segment   {"log_id": "0z0RwJBW000", "path": "/root/.influxdbv2/engine/data/50d1dfc5f00c762d/_series", "partition": "02", "segment": "0000", "error": "invalid series segment"}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u0412\u0438\u0434\u0438\u043c \u043f\u043e\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0439 series. \u0423\u0434\u0430\u043b\u0438\u043c \u0435\u0433\u043e \u0438 \u043f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0438\u043c"}),"\n",(0,r.jsx)(n.h3,{id:"\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435-\u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0445-series",children:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0432\u0440\u0435\u0436\u0434\u0451\u043d\u043d\u044b\u0445 series"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mv /root/.influxdbv2/engine/data/50d1dfc5f00c762d/_series/ /root/.influxdbv2/engine/data/50d1dfc5f00c762d/_series.bad/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u043f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0438\u043c-series",children:"\u041f\u0435\u0440\u0435\u0441\u0442\u0440\u043e\u0438\u043c series"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"influxd inspect build-tsi\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"}),"\n",(0,r.jsx)(n.p,{children:'\u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e "\u0448\u0430\u043c\u0430\u043d\u0441\u0442\u0432\u0430" \u0443 \u043c\u0435\u043d\u044f influx \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043b\u0441\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e.'}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PS."})," \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u044d\u0442\u043e \u043d\u0435 \u0441\u0430\u043c\u044b\u0439 \u0443\u0434\u0430\u0447\u043d\u044b\u0439 \u0441\u043f\u043e\u0441\u043e\u0431, \u043d\u043e \u0432 \u0437\u0430\u043f\u0438\u0441\u043d\u0443\u044e \u043a\u043d\u0438\u0436\u043a\u0443 \u043a\u0430\u043a \u0441\u0440\u043e\u0447\u043d\u044b\u0439 \u0440\u0435\u0446\u0435\u043f\u0442 \u0438\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u044f \u0440\u0435\u0448\u0438\u043b \u044d\u0442\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c."]}),"\n",(0,r.jsx)(n.p,{children:"#influxdb"})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var r=i(96540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);