"use strict";(self.webpackChunknapi_www=self.webpackChunknapi_www||[]).push([[1906],{74375:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>r,default:()=>p,frontMatter:()=>c,metadata:()=>d,toc:()=>o});var t=s(74848),i=s(28453);const c={slug:"sd-nand-diagnostics",title:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 SD-NAND \u043a\u0430\u0440\u0442 \u0432 Linux - \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432",authors:"dmn",tags:["sd-nand","linux","diagnostics","kernel","zetta"],telegram_id:16},r=void 0,d={permalink:"/en/recipes/sd-nand-diagnostics",source:"@site/techblog/2025-08-31-sd-nand-diagnostics/index.md",title:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 SD-NAND \u043a\u0430\u0440\u0442 \u0432 Linux - \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432",description:"\u041f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u0433\u043b\u0443\u0431\u043e\u043a\u043e \u043a\u043e\u043f\u043d\u0443\u0442\u044c \u0432 \u0447\u0430\u0441\u0442\u044c SD-NAND, \u0442\u0430\u043a \u043a\u0430\u043a \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043a\u0430\u0440\u0442\u044b Zetta \u043d\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c \u0432 \u044f\u0434\u0440\u0430\u0445 6.\u0445 Linux.",date:"2025-08-31T00:00:00.000Z",tags:[{inline:!0,label:"sd-nand",permalink:"/en/recipes/tags/sd-nand"},{inline:!0,label:"linux",permalink:"/en/recipes/tags/linux"},{inline:!0,label:"diagnostics",permalink:"/en/recipes/tags/diagnostics"},{inline:!0,label:"kernel",permalink:"/en/recipes/tags/kernel"},{inline:!0,label:"zetta",permalink:"/en/recipes/tags/zetta"}],readingTime:1.7,hasTruncateMarker:!1,authors:[{name:"dmn",title:"maintainer",url:"https://github.com/dmnovikov",imageURL:"https://avatars.githubusercontent.com/u/17533288?v=4",key:"dmn"}],frontMatter:{slug:"sd-nand-diagnostics",title:"\u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 SD-NAND \u043a\u0430\u0440\u0442 \u0432 Linux - \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432",authors:"dmn",tags:["sd-nand","linux","diagnostics","kernel","zetta"],telegram_id:16},unlisted:!1,prevItem:{title:"\u041f\u0435\u0440\u0435\u043d\u043e\u0441 heartbeat \u0434\u0438\u043e\u0434\u0430 \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 GPIO \u0447\u0435\u0440\u0435\u0437 overlay",permalink:"/en/recipes/gpio-heartbeat-overlay"},nextItem:{title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 Zigbee2mqtt \u043d\u0430 NAPI-C (P)",permalink:"/en/recipes/zigbee2mqtt-napi"}},a={authorsImageUrls:[void 0]},o=[{value:"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u044b \u0438 \u043f\u0440\u0438\u0435\u043c\u044b",id:"\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0435-\u0444\u0430\u043a\u0442\u044b-\u0438-\u043f\u0440\u0438\u0435\u043c\u044b",level:2},{value:"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432 SD (SD-NAND) \u043a\u0430\u0440\u0442",id:"\u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c-\u0434\u0430\u043d\u043d\u044b\u0435-\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432-sd-sd-nand-\u043a\u0430\u0440\u0442",level:3},{value:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 SCR (\u0447\u0430\u0442\u0433\u043f\u0442)",id:"\u0440\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430-scr-\u0447\u0430\u0442\u0433\u043f\u0442",level:3},{value:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 CID (\u0447\u0430\u0442\u0433\u043f\u0442)",id:"\u0440\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430-cid-\u0447\u0430\u0442\u0433\u043f\u0442",level:3},{value:"\u0427\u0442\u043e \u043f\u043e \u0444\u0430\u043a\u0442\u0443 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f",id:"\u0447\u0442\u043e-\u043f\u043e-\u0444\u0430\u043a\u0442\u0443-\u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f",level:3},{value:"\u041c\u0435\u0441\u0442\u043e \u0432 \u044f\u0434\u0440\u0435 \u0433\u0434\u0435 \u0438\u0434\u0451\u0442 \u0447\u0442\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432 \u043a\u0430\u0440\u0442\u044b",id:"\u043c\u0435\u0441\u0442\u043e-\u0432-\u044f\u0434\u0440\u0435-\u0433\u0434\u0435-\u0438\u0434\u0451\u0442-\u0447\u0442\u0435\u043d\u0438\u0435-\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432-\u043a\u0430\u0440\u0442\u044b",level:3}];function l(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"\u041f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u0433\u043b\u0443\u0431\u043e\u043a\u043e \u043a\u043e\u043f\u043d\u0443\u0442\u044c \u0432 \u0447\u0430\u0441\u0442\u044c SD-NAND, \u0442\u0430\u043a \u043a\u0430\u043a \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043a\u0430\u0440\u0442\u044b Zetta \u043d\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c \u0432 \u044f\u0434\u0440\u0430\u0445 6.\u0445 Linux."}),"\n",(0,t.jsx)(e.h2,{id:"\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0435-\u0444\u0430\u043a\u0442\u044b-\u0438-\u043f\u0440\u0438\u0435\u043c\u044b",children:"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u044b \u0438 \u043f\u0440\u0438\u0435\u043c\u044b"}),"\n",(0,t.jsx)(e.h3,{id:"\u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c-\u0434\u0430\u043d\u043d\u044b\u0435-\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432-sd-sd-nand-\u043a\u0430\u0440\u0442",children:"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432 SD (SD-NAND) \u043a\u0430\u0440\u0442"}),"\n",(0,t.jsx)(e.p,{children:"\u041a\u0430\u0440\u0442\u0430  1."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"root@napi-rk3308b-s:~# cat /sys/bus/mmc/devices/mmc0\\:1388/cid\nba2345534134474206071c06fe016945\nroot@napi-rk3308b-s:~# cat /sys/bus/mmc/devices/mmc0\\:1388/csd\n400e00325b5900001cdf7f800a4000d7\nroot@napi-rk3308b-s:~# cat /sys/bus/mmc/devices/mmc0\\:1388/ocr\n0x00300000\nroot@napi-rk3308b-s:~# cat /sys/bus/mmc/devices/mmc0\\:1388/rca\n0x1388\nroot@napi-rk3308b-s:~# cat /sys/bus/mmc/devices/mmc0\\:1388/scr\n0235000e00000000\nroot@napi-rk3308b-s:~#\n\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u041a\u0430\u0440\u0442\u0430 2"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"root@napi-nightstarfish:~# cat /sys/bus/mmc/devices/mmc0\\:1388/cid\ne700115a6574746101b135ee4a719523\nroot@napi-nightstarfish:~#  cat /sys/bus/mmc/devices/mmc0\\:1388/csd\n400e00325b5900001d177f800a40008d\nroot@napi-nightstarfish:~# cat /sys/bus/mmc/devices/mmc0\\:1388/ocr\n0x00300000\nroot@napi-nightstarfish:~# cat /sys/bus/mmc/devices/mmc0\\:1388/rca\n0x1388\nroot@napi-nightstarfish:~# cat /sys/bus/mmc/devices/mmc0\\:1388/scr\n0205848f33333039\nroot@napi-nightstarfish:~#\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u0412 uboot"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"=> mmc info\nDevice: mmc@ff500000\nManufacturer ID: 3\nOEM: 5344\nName: SA04G\nBus Speed: 50000000\nMode : SD High Speed (50MHz)\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u0440\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430-scr-\u0447\u0430\u0442\u0433\u043f\u0442",children:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 SCR (\u0447\u0430\u0442\u0433\u043f\u0442)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"1) SCR contents (from Linux):\n\nSCR = 02 05 84 8F 33 33 30 39\n\nDecoded:\n\nSCR Structure = 0 (v1.0)\n\nSD Spec = 2.0 + Spec3 \u2192 SD 3.0 (UHS-I)\n\nBus widths = 1-bit and 4-bit supported\n\nSecurity = CPRM supported\n\nByte 3 = 0x8F \u2192 according to the SD spec, bits indicate:\n\nbit0 = CMD20 supported\n\nbit1 = CMD23 supported\n\nbit2 = CMD48 supported\n\nbit3 = CMD49 supported\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u0440\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430-cid-\u0447\u0430\u0442\u0433\u043f\u0442",children:"\u0420\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0430 CID (\u0447\u0430\u0442\u0433\u043f\u0442)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"CID #1\n\nba2345534134474206071c06fe016945\n\nMID: 0xBA\n\nOID: 0x23 0x45  \u2192 \xab#E\xbb (\u043d\u0435\u043f\u0435\u0447\u0430\u0442\u043d\u044b\u0439/\u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 OID, \u0442\u0440\u0430\u043a\u0442\u0443\u044e \u043a\u0430\u043a hex)\n\nPNM: SA4GB\n\nPRV: 0.6\n\nPSN: 119277310 (0x071C06FE)\n\nMDT: 2022-09  (\u0440\u0430\u0437\u0431\u043e\u0440 \u043f\u043e \u0444\u043e\u0440\u043c\u0443\u043b\u0435: ((cid[13]&0x0F)<<8)|cid[14]) \u2192 \u0433\u043e\u0434=2000+((mdt>>4)&0xFF), \u043c\u0435\u0441\u044f\u0446=mdt&0xF)\n"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"CID #2\n\ne700115a6574746101b135ee4a719523\n\nMID: 0xE7  (\u043f\u043e\u0445\u043e\u0436\u0435 \u043d\u0430 Zetta)\n\nOID: 0x00 0x11  \u2192 \u043d\u0435\u043f\u0435\u0447\u0430\u0442\u043d\u044b\u0439 (\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0432 hex)\n\nPNM: Zetta\n\nPRV: 0.1\n\nPSN: 2973101642 (0xB135EE4A)\n\nMDT: 2025-05\n\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u0447\u0442\u043e-\u043f\u043e-\u0444\u0430\u043a\u0442\u0443-\u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f",children:"\u0427\u0442\u043e \u043f\u043e \u0444\u0430\u043a\u0442\u0443 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c/\u0431\u0440\u0435\u043d\u0434:"})}),"\n",(0,t.jsx)(e.p,{children:"\u2014 #1: MID=0xBA, \u0438\u043c\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430 SA4GB (\u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a \xab4GB\xbb \u043b\u0438\u043d\u0435\u0439\u043a\u0430).\n\u2014 #2: MID=0xE7, \u0438\u043c\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430 Zetta (\u0431\u0440\u0435\u043d\u0434 Zetta \u0432\u0438\u0434\u0435\u043d \u043f\u0440\u044f\u043c\u043e \u0432 PNM)."}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"\u0412\u0435\u0440\u0441\u0438\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430 (PRV):"})}),"\n",(0,t.jsx)(e.p,{children:"\u2014 #1: 0.6 (\u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0437\u0434\u043d\u044f\u044f \u0440\u0435\u0432\u0438\u0437\u0438\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u043b\u0438\u043d\u0435\u0439\u043a\u0438),\n\u2014 #2: 0.1 (\u0441\u0430\u043c\u0430\u044f \u0440\u0430\u043d\u043d\u044f\u044f \u0440\u0435\u0432\u0438\u0437\u0438\u044f)."}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"\u0421\u0435\u0440\u0438\u0439\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 (PSN):"})," \u0440\u0430\u0437\u043d\u044b\u0435 (\u043e\u0436\u0438\u0434\u0430\u0435\u043c\u043e), \u0443 #2 \u2014 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0430 (MDT):"}),"\n\u2014 #1: 2022-09,\n\u2014 #2: 2025-05 (\u0441\u0432\u0435\u0436\u0435\u0435)."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"OID:"})," \u0443 \u043e\u0431\u0435\u0438\u0445 \u2014 \u043d\u0435\u043f\u0435\u0447\u0430\u0442\u043d\u044b\u0435/\u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u043a\u043e\u0434\u044b (\u044d\u0442\u043e \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e: \u043f\u043e\u043b\u0435 OEM/Application ID \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u043d\u043e \u0431\u044b\u0442\u044c ASCII)."]}),"\n",(0,t.jsx)(e.h3,{id:"\u043c\u0435\u0441\u0442\u043e-\u0432-\u044f\u0434\u0440\u0435-\u0433\u0434\u0435-\u0438\u0434\u0451\u0442-\u0447\u0442\u0435\u043d\u0438\u0435-\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432-\u043a\u0430\u0440\u0442\u044b",children:"\u041c\u0435\u0441\u0442\u043e \u0432 \u044f\u0434\u0440\u0435 \u0433\u0434\u0435 \u0438\u0434\u0451\u0442 \u0447\u0442\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432 \u043a\u0430\u0440\u0442\u044b"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:"https://github.com/torvalds/linux/blob/07d9df80082b8d1f37e05658371b087cb6738770/drivers/mmc/core/sd.c#L1279",children:"https://github.com/torvalds/linux/blob/07d9df80082b8d1f37e05658371b087cb6738770/drivers/mmc/core/sd.c#L1279"})}),"\n",(0,t.jsx)(e.p,{children:"#sdnand #kernel #linuxkernel #sys #uboot"})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>d});var t=s(96540);const i={},c=t.createContext(i);function r(n){const e=t.useContext(c);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),t.createElement(c.Provider,{value:e},n.children)}}}]);